c-record inline-template="" :user-id="#{record.user.id}"
  .c-record
    .row.mb-2
      .c-record__avatar.col.pr-0
        = link_to user_path(record.user.username) do
          = ann_image_tag record.user.profile, :tombo_avatar, size: "30x30", class: "rounded-circle"
      .col.pl-2
        .row
          .col
            = link_to record.user.profile.name, user_path(record.user.username)
            - if record.user.supporter? && !record.user.setting.hide_supporter_badge?
              span.badge.u-badge-supporter.ml-1
                = t "noun.supporter"
            - if page_category == "records_show"
              .small.text-muted
                = "#{record.impressions_count} views"
          .col.col-auto.pl-0
            .text-right
              - if record.modify_comment?
                small.mr-1.text-muted
                  = icon "pencil-alt"
              = link_to record_path(record.user.username, record), class: "small text-muted", title: local_datetime(record.created_at) do
                = local_time_ago_in_words(record.created_at)
    c-comment-guard inline-template="" :init-is-spoiler="#{is_spoiler == true}"
      .c-record__content.mb-2
        - if record.rating.present?
          c-rating-label :init-rating="#{record.rating}" v-show="!isSpoiler"
        - elsif record.rating_state.present?
          c-rating-state-label :init-rating-state=="'#{record.rating_state}'" v-show="!isSpoiler"
        .c-body @click="remove"
          c-body inline-template=""
            .c-body__content = record.comment
    .text-right
      c-like-button resource-name="Record" :init-resource-id="#{record.id}" :init-likes-count="#{record.likes_count}" :init-is-liked="#{user_signed_in? && current_user.like?(record)}" :is-signed-in="#{user_signed_in?}"
      = link_to record_path(record.user.username, record), class: "d-inline-block ml-2" do
        = icon "comment", "far", class: "mr-1"
        = record.comments_count
      - if user_signed_in? && current_user != record.user
        .c-options-dropdown.dropdown.ml-2.d-inline-block
          .dropdown-toggle data-toggle="dropdown"
            = icon "ellipsis-h"
          .dropdown-menu
            = link_to "#", class: "dropdown-item" do
              c-mute-user-button :user-id="#{record.user.id}"
    .text-right
      - if record.user == current_user
        = link_to edit_record_path(record.user.username, record), class: "mr-2" do
          = icon "edit", class: "mr-1"
          = t "noun.edit"
        = link_to record_path(record.user.username, record), method: :delete, data: { confirm: t("messages._common.are_you_sure") } do
          = icon "trash-alt", "far", class: "mr-1"
          = t "noun.delete"
